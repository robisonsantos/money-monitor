<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%sveltekit.assets%/favicon.svg" type="image/svg+xml" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Theme and accessibility meta tags -->
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)" />
    <meta name="theme-color" content="#0f172a" media="(prefers-color-scheme: dark)" />
    <meta name="color-scheme" content="light dark" />

    <!-- SEO and accessibility -->
    <meta name="description" content="Money Monitor - Track your investments and portfolio performance with ease" />
    <meta name="author" content="Money Monitor" />
    <meta name="robots" content="noindex, nofollow" />

    <!-- Open Graph meta tags -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Money Monitor" />
    <meta property="og:description" content="Track your investments and portfolio performance" />
    <meta property="og:site_name" content="Money Monitor" />

    <!-- Apple touch icon -->
    <link rel="apple-touch-icon" href="%sveltekit.assets%/favicon.svg" />

    <!-- Prevent FOUC (Flash of Unstyled Content) by detecting theme early -->
    <script>
      // Detect theme preference before the page renders to prevent flash
      (function () {
        try {
          const stored = localStorage.getItem("money-monitor-theme");
          const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;

          let theme = "light";
          if (stored === "dark" || (stored === "system" && prefersDark) || (!stored && prefersDark)) {
            theme = "dark";
          }

          document.documentElement.classList.add(theme);

          // Set CSS custom properties immediately
          const root = document.documentElement;
          if (theme === "dark") {
            root.style.setProperty("--color-background-primary", "15 23 42");
            root.style.setProperty("--color-background-secondary", "30 41 59");
            root.style.setProperty("--color-background-tertiary", "51 65 85");
            root.style.setProperty("--color-foreground-primary", "248 250 252");
            root.style.setProperty("--color-foreground-secondary", "226 232 240");
            root.style.setProperty("--color-foreground-tertiary", "148 163 184");
            root.style.setProperty("--color-border-primary", "71 85 105");
            root.style.setProperty("--color-border-secondary", "100 116 139");
            root.style.setProperty("--color-accent-primary", "59 130 246");
            root.style.setProperty("--color-accent-secondary", "37 99 235");
            root.style.setProperty("--color-chart-1", "34 197 94");
            root.style.setProperty("--color-chart-2", "59 130 246");
            root.style.setProperty("--color-chart-3", "168 85 247");
            root.style.setProperty("--color-chart-4", "245 158 11");
            root.style.setProperty("--color-chart-5", "239 68 68");
          } else {
            root.style.setProperty("--color-background-primary", "255 255 255");
            root.style.setProperty("--color-background-secondary", "248 250 252");
            root.style.setProperty("--color-background-tertiary", "241 245 249");
            root.style.setProperty("--color-foreground-primary", "15 23 42");
            root.style.setProperty("--color-foreground-secondary", "51 65 85");
            root.style.setProperty("--color-foreground-tertiary", "100 116 139");
            root.style.setProperty("--color-border-primary", "226 232 240");
            root.style.setProperty("--color-border-secondary", "203 213 225");
            root.style.setProperty("--color-accent-primary", "37 99 235");
            root.style.setProperty("--color-accent-secondary", "29 78 216");
            root.style.setProperty("--color-chart-1", "22 163 74");
            root.style.setProperty("--color-chart-2", "37 99 235");
            root.style.setProperty("--color-chart-3", "147 51 234");
            root.style.setProperty("--color-chart-4", "217 119 6");
            root.style.setProperty("--color-chart-5", "220 38 38");
          }
        } catch (e) {
          // Fallback to light theme if anything goes wrong
          document.documentElement.classList.add("light");
        }
      })();
    </script>

    <title>Money Monitor</title>
    %sveltekit.head%
  </head>
  <body data-sveltekit-preload-data="hover" class="bg-background-secondary text-foreground-primary">
    <div style="display: contents">%sveltekit.body%</div>
  </body>
</html>
